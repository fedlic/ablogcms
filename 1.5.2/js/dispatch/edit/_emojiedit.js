ACMS.Dispatch.Edit._emojiedit=function(a,h){var f=function(g){var e=$(".emoji-edit",h);e.append(g);$("a.emoji-trigger-tag",e).click(function(){var d=$(a).selection(),b=this.rel;if("markdown"==$('select[name^="text_tag_"]',$(this).parents(ACMS.Config.Edit.itemMark)).val())switch(b){case "a":(b=prompt(this.title,"http://"))&&b!="http://"&&$(a).selection(["[",d,"](",b,")"].join(""));break;case "em":$(a).selection("*"+d+"*");break;case "strong":$(a).selection("**"+d+"**");break;case "u":$(a).selection("<u>"+
d+"</u>")}else switch(b){case "a":(b=prompt(this.title,"http://"))&&b!="http://"&&$(a).selection('<a href="'+b+'">'+d+"</a>");break;default:$(a).selection("<"+b+">"+d+"</"+b+">")}return false});$("a.emoji-trigger-text",e).click(function(){d=$(a).selection();$(a).selection('<span class="'+this.rel+'">'+d+"</span>");return false});$("a.emoji-trigger-emoji",e).click(function(){$(a).selection(this.rel+$(a).selection());return false});e.show()},c=arguments.callee;if(c.html)f(c.html);else if(c.stack)c.stack.push(f);
else{c.stack=[f];f=ACMS.Library.acmsLink({tpl:"ajax/emoji-edit.html"},true);$.get(f,function(g){for(c.html=g;c.stack.length;)c.stack.shift()(g)})}};
